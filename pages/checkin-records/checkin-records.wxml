<!--checkin-records.wxml-->
<view class="container">
  <!-- é¡µé¢æ ‡é¢˜ -->
  <view class="header">
    <text class="header-title">æ‰“å¡è®°å½•</text>
  </view>
  
  <!-- ç­‰çº§ä¿¡æ¯ -->
  <view wx:if="{{levelInfo}}" class="level-section">
    <view class="level-badge" style="background-color: {{levelInfo.color}};">
      <text class="level-icon">{{levelInfo.icon}}</text>
      <text class="level-text">{{levelInfo.name}}</text>
      <text class="level-number">Lv{{levelInfo.level}}</text>
    </view>
    <view class="level-progress">
      <view class="progress-bar">
        <view class="progress-fill" style="width: {{levelInfo.progress}}%; background-color: {{levelInfo.color}};"></view>
      </view>
      <text class="progress-text">ç»éªŒå€¼: {{levelInfo.exp}}/{{levelInfo.maxExp}}</text>
    </view>
  </view>

  <!-- åŠ è½½ä¸­ -->
  <view wx:if="{{loading}}" class="loading">
    <text class="loading-text">åŠ è½½ä¸­...</text>
  </view>

  <!-- æ‰“å¡è®°å½•åˆ—è¡¨ -->
  <view wx:elif="{{!loading && records.length > 0}}" class="records-list">
    <block wx:for="{{records}}" wx:key="_id">
      <view class="record-item" bindtap="goToActivityDetail" data-id="{{item.activityId}}">
        <!-- æ´»åŠ¨ä¿¡æ¯ -->
        <view class="record-header">
          <text class="record-activity-name">{{item.activityName}}</text>
          <text class="record-date">{{item.checkinDate}}</text>
        </view>
        
        <!-- æ‰“å¡ç‚¹ä¿¡æ¯ -->
        <view class="record-checkpoint">
          <text class="checkpoint-icon">ğŸ“</text>
          <text class="checkpoint-name">{{item.checkpointName}}</text>
        </view>
        
        <!-- æ‰“å¡å†…å®¹ -->
        <view class="record-content">
          <text wx:if="{{item.note}}" class="record-note">{{item.note}}</text>
          <text wx:else class="record-note-empty">æ— æ‰“å¡å¿ƒå¾—</text>
        </view>
        
        <!-- æ‰“å¡å›¾ç‰‡ -->
        <view wx:if="{{item.images && item.images.length > 0}}" class="record-images">
          <block wx:for="{{item.images}}" wx:key="index">
            <image class="record-image" src="{{item}}" mode="aspectFill" bindtap="previewImage" data-index="{{index}}" data-images="{{item.images}}"/>
          </block>
        </view>
        
        <!-- æ‰“å¡ä½ç½® -->
        <view class="record-location">
          <text class="location-icon">ğŸ™ï¸</text>
          <text class="location-text">{{item.locationName}}</text>
        </view>
      </view>
    </block>
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view wx:else class="empty-state">
    <text class="empty-icon">ğŸ“</text>
    <text class="empty-title">æš‚æ— æ‰“å¡è®°å½•</text>
    <text class="empty-desc">å¿«å»å‚ä¸æ´»åŠ¨ï¼Œå¼€å§‹ä½ çš„åŸå¸‚æ¢ç´¢ä¹‹æ—…å§ï¼</text>
    <button class="empty-btn" bindtap="goToHome">æµè§ˆæ´»åŠ¨</button>
  </view>
</view>