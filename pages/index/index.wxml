<!--index.wxml-->
<view class="container">
  <!-- é¡¶éƒ¨æœç´¢æ  -->
  <view class="search-bar">
    <input 
      class="search-input" 
      placeholder="æœç´¢æ´»åŠ¨" 
      bindinput="onSearchInput"
    />
    <button class="scan-btn" bindtap="scanCode">
      <text class="scan-icon">ğŸ“·</text>
      <text class="scan-text">æ‰«ç åŠ å…¥</text>
    </button>
  </view>

  <!-- æ´»åŠ¨åˆ—è¡¨æ ‡é¢˜ -->
  <view class="section-header">
    <text class="section-title">çƒ­é—¨æ´»åŠ¨</text>
    <button class="more-btn" bindtap="loadMore">æŸ¥çœ‹æ›´å¤š</button>
  </view>

  <!-- æ´»åŠ¨åˆ—è¡¨ -->
  <view class="activity-list">
    <block wx:for="{{activities}}" wx:key="_id">
      <view class="activity-item" bindtap="goToActivity" data-id="{{item._id}}">
        <image 
          class="activity-item-image" 
          src="{{item.coverImage || 'https://via.placeholder.com/160x160?text=æ´»åŠ¨å°é¢'}}" 
          mode="aspectFill"
        />
        <view class="activity-item-content">
          <text class="activity-item-title">{{item.name}}</text>
          <text class="activity-item-desc">{{item.description}}</text>
          <view class="activity-item-info">
            <text class="info-item">ğŸ“ {{item.city}}</text>
            <text class="info-item">ğŸ‘¥ {{item.participants || 0}}äººå‚ä¸</text>
            <text class="info-item">â° {{item.startDate}} - {{item.endDate}}</text>
          </view>
        </view>
      </view>
    </block>

    <!-- ç©ºçŠ¶æ€ -->
    <view wx:if="{{activities.length === 0 && !loading}}" class="empty-state">
      <text class="empty-icon">ğŸ‰</text>
      <text class="empty-text">æš‚æ— æ´»åŠ¨</text>
      <text class="empty-subtext">å¿«æ¥åˆ›å»ºç¬¬ä¸€ä¸ªæ´»åŠ¨å§ï¼</text>
      <button class="create-btn" bindtap="goToCreate">åˆ›å»ºæ´»åŠ¨</button>
    </view>

    <!-- åŠ è½½ä¸­ -->
    <view wx:if="{{loading}}" class="loading">
      <text class="loading-text">åŠ è½½ä¸­...</text>
    </view>
  </view>
</view>