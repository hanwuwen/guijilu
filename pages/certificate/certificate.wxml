<!--certificate.wxml-->
<view class="container">
  <!-- éšè—çš„ç”»å¸ƒï¼Œç”¨äºç”Ÿæˆè¯ä¹¦å›¾ç‰‡ -->
  <canvas 
    id="certificateCanvas" 
    style="width: 750rpx; height: 1000rpx; position: absolute; top: -9999px; left: -9999px;" 
  />

  <!-- åŠ è½½ä¸­ -->
  <view wx:if="{{loading}}" class="loading">
    <text class="loading-text">ç”Ÿæˆè¯ä¹¦ä¸­...</text>
  </view>

  <!-- è¯ä¹¦é¡µé¢ -->
  <view wx:else>
    <!-- è¯ä¹¦å¡ç‰‡ -->
    <view class="certificate-card">
      <view class="certificate-header">
        <text class="certificate-title">åŸå¸‚æ¼«æ¸¸è€…</text>
        <text class="certificate-subtitle">CITY WANDERER</text>
      </view>

      <view class="certificate-content">
        <text class="certificate-welcome">å…¹è¯æ˜</text>
        <text class="certificate-username">{{userInfo.nickName}}</text>
        <text class="certificate-description">æˆåŠŸå®Œæˆ</text>
        <text class="certificate-activity">{{activity.name}}</text>
        <text class="certificate-checkpoints">å…± {{activity.checkpoints.length}} ä¸ªæ‰“å¡ç‚¹</text>
        <text class="certificate-date">å®Œæˆæ—¶é—´: {{completionDate}}</text>
      </view>

      <view class="certificate-footer">
        <image 
          class="certificate-seal" 
          src="https://via.placeholder.com/128x128?text=å°ç« " 
          mode="aspectFill"
        />
        <text class="certificate-valid">ç”µå­è¯ä¹¦ Â· æ°¸ä¹…æœ‰æ•ˆ</text>
      </view>
    </view>

    <!-- æ“ä½œæŒ‰é’® -->
    <view class="action-buttons">
      <button 
        class="save-btn" 
        bindtap="saveCertificate"
      >
        ä¿å­˜è¯ä¹¦
      </button>
      <button 
        class="share-btn" 
        bindtap="shareCertificate"
      >
        åˆ†äº«è¯ä¹¦
      </button>
      <button 
        class="back-btn" 
        bindtap="goBack"
      >
        è¿”å›æ´»åŠ¨
      </button>
    </view>

    <!-- æ´»åŠ¨ä¿¡æ¯ -->
    <view class="card">
      <text class="section-title">æ´»åŠ¨ä¿¡æ¯</text>
      <view class="activity-info">
        <text class="info-item">ğŸ“ {{activity.city}}</text>
        <text class="info-item">â° {{activity.startDate}} - {{activity.endDate}}</text>
        <text class="info-item">ğŸ‘¥ {{activity.participants || 0}}äººå‚ä¸</text>
      </view>
    </view>
  </view>
</view>