<!--profile.wxml-->
<view class="container">
  <!-- 加载中 -->
  <view wx:if="{{loading}}" class="loading">
    <text class="loading-text">加载中...</text>
  </view>

  <!-- 个人中心页面 -->
  <view wx:else>
    <!-- 用户信息卡片 -->
    <view class="user-card">
      <view class="avatar-section">
        <image 
          class="avatar" 
          src="{{userInfo.avatarUrl || 'https://via.placeholder.com/128x128?text=头像'}}" 
          mode="aspectFill"
          bindtap="chooseAvatar"
        />
        <text class="avatar-upload">点击更换</text>
      </view>
      <view class="user-info">
        <text class="username">{{userInfo.nickName || '未设置昵称'}}</text>
        <text class="user-signature">{{userInfo.signature || '未设置签名'}}</text>
        <text class="user-city">{{userInfo.city || '未设置城市'}}</text>
      </view>
    </view>

    <!-- 我的活动 -->
    <view class="card">
      <text class="section-title">我的活动</text>
      <view class="activity-stats">
        <view class="stat-item">
          <text class="stat-number">{{stats.created || 0}}</text>
          <text class="stat-label">创建的活动</text>
        </view>
        <view class="stat-item">
          <text class="stat-number">{{stats.joined || 0}}</text>
          <text class="stat-label">参与的活动</text>
        </view>
        <view class="stat-item">
          <text class="stat-number">{{stats.completed || 0}}</text>
          <text class="stat-label">完成的活动</text>
        </view>
      </view>
    </view>

    <!-- 个人资料编辑 -->
    <view class="card">
      <text class="section-title">个人资料</text>
      <view class="form-item">
        <text class="form-label">昵称</text>
        <input 
          class="form-input" 
          placeholder="请输入昵称" 
          value="{{userInfo.nickName}}" 
          bindinput="onNickNameChange"
        />
      </view>
      <view class="form-item">
        <text class="form-label">签名</text>
        <textarea 
          class="form-textarea" 
          placeholder="请输入个人签名" 
          value="{{userInfo.signature}}" 
          bindinput="onSignatureChange"
        />
      </view>
      <view class="form-item">
        <text class="form-label">城市</text>
        <input 
          class="form-input" 
          placeholder="请输入所在城市" 
          value="{{userInfo.city}}" 
          bindinput="onCityChange"
        />
      </view>
      <button 
        class="save-btn" 
        bindtap="saveProfile"
      >
        保存修改
      </button>
    </view>

    <!-- 其他功能 -->
    <view class="card">
      <text class="section-title">其他</text>
      <view class="menu-list">
        <view class="menu-item" bindtap="goToAbout">
          <text class="menu-text">关于我们</text>
          <text class="menu-arrow">→</text>
        </view>
        <view class="menu-item" bindtap="goToSettings">
          <text class="menu-text">设置</text>
          <text class="menu-arrow">→</text>
        </view>
      </view>
    </view>
  </view>
</view>